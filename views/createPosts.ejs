<%
  // Determine if we're in edit mode or create mode
  const isEditMode = mode === "edit";
  const pageTitle = isEditMode ? "Edit Post" : "Create Post";
  const formAction = isEditMode ? `/posts/edit/${post.id}` : "/posts/create";
  const buttonText = isEditMode ? "Update Post" : "Create Post";
%>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/css/tailwind.css" rel="stylesheet" />
    <title><%= pageTitle %></title>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <main class="max-w-2xl mx-auto p-6">
      <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900"><%= pageTitle %></h1>
        <a
          href="/posts"
          class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition"
          >Home</a
        >
      </div>

      <form action="<%= formAction %>" method="POST" class="bg-white rounded-lg shadow-md p-6 space-y-4">
        <div>
          <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
            >Title</label
          >
          <input
            type="text"
            id="title"
            name="title"
            placeholder="Enter post title"
            value="<%= isEditMode ? post.title : '' %>"
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <div>
          <label for="link" class="block text-sm font-medium text-gray-700 mb-1"
            >Link</label
          >
          <input
            type="text"
            id="link"
            name="link"
            placeholder="Enter link (optional)"
            value="<%= isEditMode ? (post.link || '') : '' %>"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <div>
          <label for="description" class="block text-sm font-medium text-gray-700 mb-1"
            >Description</label
          >
          <textarea
            id="description"
            name="description"
            rows="4"
            placeholder="Write a short description..."
            required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          ><%= isEditMode ? post.description : '' %></textarea>
        </div>

        <div>
          <label for="subgroup" class="block text-sm font-medium text-gray-700 mb-1"
            >Subgroup</label
          >
          <input
            type="text"
            id="subgroup"
            name="subgroup"
            placeholder="Enter subgroup name"
            value="<%= isEditMode ? post.subgroup : '' %>"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <button
          type="submit"
          class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition font-medium"
        >
          <%= buttonText %>
        </button>

        <% if (isEditMode) { %>
        <a
          href="/posts/show/<%= post.id %>"
          class="block w-full text-center py-2 px-4 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition"
        >
          Cancel
        </a>
        <% } %>
      </form>
    </main>
  </body>
</html>
